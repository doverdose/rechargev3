<% layout('../layouts/default') -%>

<div class="js-checkinselector-container">

	<div class="page-header">
		<h2>Checkins</h2>

		<div class="header-actions">
			<button type="button" class="btn btn-default js-checkinselector-btn" rel="popover" data-placement="bottom" data-tpl=".js-checkinselector-template">New check-in</button>
		</div>
	</div>

	<% if(c.length) { %>

		<table class="table">
			<thead>
				<tr>
					<td class="col-md-9">
						<strong>Checkin</strong>
					</td>
					<td></td>
				</tr>
			</thead>
			<tbody>
			<% for (var i = 0; i < c.length; i++) { %>
				<tr>
					<td>
						<a href='/checkin/<%=c[i].id%>'><%=: c[i].timestamp | fromNow %>
					</td>
					<td>
						<form action="/checkin/remove" method="post" class="pull-right">
							<input type="hidden" name="_csrf" value="<%= csrf_token %>">
							<input type="hidden" name="id" id="id" value="<%=c[i].id%>">

							<button type="submit" class="btn btn-danger">Remove</button>
						</form>
					</td>
				</tr>
			<% } %>
			</tbody>
		</table>

	<% } else { %>

		<h4 class="text-center text-muted">No checkins available</h4>

	<% } %>

	<div class="js-template js-checkinselector-template">
		<form action="/checkin/new" method="post">
			<input type="hidden" name="_csrf" value="<%= csrf_token %>">

			<div class="form-group">
				<label for="templateId">Select checkin type</label>
				<select class="js-select2" id="id" name="id">
					<% for(var i = 0; i < checkinTemplates.length; i++) { %>
						<option value="<%= checkinTemplates[i].id %>">
							<%= checkinTemplates[i].title %>
						</option>
					<% } %>
				</select>
			</div>

			<button type="submit" class="btn btn-primary btn-block">
				Check-in
			</button>
		</form>
	</div>

</div>
